# 开闭原则
英文`Open-Closed Principle`，缩写`OCP`

## 定义
一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。一个软件实体应该通过扩展来实现变化，而不是通过修改已有的代码来实现变化。

- 软件实体
    - 项目或软件产品中按照一定的逻辑规则划分的模块
    - 抽象和类
    - 方法

## 注意

开闭原则是最基础的一个原则，前五章节介绍的原则都是开闭原则的具体形态，也就是说前五个原则就是指导设计的工具和方法，而开闭原则才是其精神领袖

## 如何使用

1. 抽象约束

    通过接口或抽象类可以约束一组可能变化的行为，并且能够实现对扩展开放

    - 第一，通过接口或抽象类约束扩展，对扩展进行边界限定，不允许出现在接口或抽象类中不存在的public方法
    
    - 第二，参数类型、引用对象尽量使用接口或者抽象类，而不是实现类；

    - 第三，抽象层尽量保持稳定，一旦确定即不允许修改
    
2. 元数据（metadata）控制模块行为

3. 制定项目章程

4. 封装变化
    
    - 第一，将相同的变化封装到一个接口或抽象类中；
    
    - 第二，将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或抽象类中
    
    封装变化，也就是受保护的变化（protected variations），找出预计有变化或不稳定的点，我们为这些变化点创建稳定的接口，准确地讲是封装可能发生的变化，一旦预测到或“第六感”发觉有变化，就可以进行封装
